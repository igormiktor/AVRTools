<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AVRTools: I2cMaster.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AVRTools
   </div>
   <div id="projectbrief">A Library for the AVR ATmega328 and ATmega2560 Microcontrollers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_c9687f172f2182476bc6c15b0976464d.html">AVRTools</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">I2cMaster.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This file provides functions that interface to the TWI (two-wire serial interface) hardware of the Arduino Uno (ATmega328) and Arduino Mega (ATmega2560), providing a high-level interface to I2C protocol communications. Include this file if you want your application will operate in Master mode as defined in the I2C protocol.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;util/atomic.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for I2cMaster.h:</div>
<div class="dyncontent">
<div class="center"><img src="I2cMaster_8h__incl.png" border="0" usemap="#I2cMaster_8h" alt=""/></div>
</div>
</div>
<p><a href="I2cMaster_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespaceI2cMaster"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceI2cMaster.html">I2cMaster</a></td></tr>
<tr class="memdesc:namespaceI2cMaster"><td class="mdescLeft">&#160;</td><td class="mdescRight">This namespace bundles the I2C-protocol-based interface to the TWI hardware. It provides logical cohesion for functions implement the Master portions of the I2C protocol and prevents namespace collisions. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a0968de4738f13ce811f6f7f3ee228292"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceI2cMaster.html#a0968de4738f13ce811f6f7f3ee228292">I2cMaster::I2cBusSpeed</a> { <a class="el" href="namespaceI2cMaster.html#a0968de4738f13ce811f6f7f3ee228292a67b829de73e215a8299a79b7a4deb074">I2cMaster::kI2cBusSlow</a>, 
<a class="el" href="namespaceI2cMaster.html#a0968de4738f13ce811f6f7f3ee228292aaf00edfa86af695617382919eebd0d47">I2cMaster::kI2cBusFast</a>
 }<tr class="memdesc:a0968de4738f13ce811f6f7f3ee228292"><td class="mdescLeft">&#160;</td><td class="mdescRight">This enum lists I2C bus speed configurations.  <a href="namespaceI2cMaster.html#a0968de4738f13ce811f6f7f3ee228292">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:a0968de4738f13ce811f6f7f3ee228292"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc15f7c4cd5520421ee351e310db69b6"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceI2cMaster.html#abc15f7c4cd5520421ee351e310db69b6">I2cMaster::I2cStatusCodes</a> { <a class="el" href="namespaceI2cMaster.html#abc15f7c4cd5520421ee351e310db69b6a2f7f2a0a8c24783f82f72de24fc4fcab">I2cMaster::kI2cCompletedOk</a> = 0x00, 
<a class="el" href="namespaceI2cMaster.html#abc15f7c4cd5520421ee351e310db69b6a7e55ca88c09b4f95c652ada62d9e694d">I2cMaster::kI2cError</a> = 0x01, 
<a class="el" href="namespaceI2cMaster.html#abc15f7c4cd5520421ee351e310db69b6aaa41a52f117c1438af57e2c9397539d0">I2cMaster::kI2cNotStarted</a> = 0x02, 
<a class="el" href="namespaceI2cMaster.html#abc15f7c4cd5520421ee351e310db69b6adca2a28fd8bb4837b3c5fc2fb85c71cb">I2cMaster::kI2cInProgress</a> = 0x04
 }<tr class="memdesc:abc15f7c4cd5520421ee351e310db69b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">This enum lists I2C status codes reported by the various transmit functions.  <a href="namespaceI2cMaster.html#abc15f7c4cd5520421ee351e310db69b6">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:abc15f7c4cd5520421ee351e310db69b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97252fd80d80c368f1fb47402bfeb3a4"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceI2cMaster.html#a97252fd80d80c368f1fb47402bfeb3a4">I2cMaster::I2cSendErrorCodes</a> { <br />
&#160;&#160;<a class="el" href="namespaceI2cMaster.html#a97252fd80d80c368f1fb47402bfeb3a4ae7592fb54b2482a041002e358b8c0136">I2cMaster::kI2cNoError</a> = 0, 
<a class="el" href="namespaceI2cMaster.html#a97252fd80d80c368f1fb47402bfeb3a4ac211e69906718db3b7c982d092de9cc8">I2cMaster::kI2cErrTxBufferFull</a> = 1, 
<a class="el" href="namespaceI2cMaster.html#a97252fd80d80c368f1fb47402bfeb3a4a1dbe13c69ecd5f60a5804abffddabb7f">I2cMaster::kI2cErrMsgTooLong</a> = 2, 
<a class="el" href="namespaceI2cMaster.html#a97252fd80d80c368f1fb47402bfeb3a4aa8d986b05a52b6551979ce43eb29dae2">I2cMaster::kI2cErrNullStatusPtr</a> = 3, 
<br />
&#160;&#160;<a class="el" href="namespaceI2cMaster.html#a97252fd80d80c368f1fb47402bfeb3a4a03f14e7f0733c0d8f5ad1e10fdd07059">I2cMaster::kI2cErrWriteWithoutData</a> = 4, 
<a class="el" href="namespaceI2cMaster.html#a97252fd80d80c368f1fb47402bfeb3a4aaf905ed9b3d8f31f9bacfb2e24cc6cda">I2cMaster::kI2cErrReadWithoutStorage</a> = 5
<br />
 }<tr class="memdesc:a97252fd80d80c368f1fb47402bfeb3a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">This enum lists I2C errors codes that may occur when you try to write a message.  <a href="namespaceI2cMaster.html#a97252fd80d80c368f1fb47402bfeb3a4">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:a97252fd80d80c368f1fb47402bfeb3a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9839cfc29c6fa40e194426db97cab1b1"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceI2cMaster.html#a9839cfc29c6fa40e194426db97cab1b1">I2cMaster::I2cPullups</a> { <a class="el" href="namespaceI2cMaster.html#a9839cfc29c6fa40e194426db97cab1b1a5b00c294996a55832b7acebea2c40b64">I2cMaster::kPullupsOff</a>, 
<a class="el" href="namespaceI2cMaster.html#a9839cfc29c6fa40e194426db97cab1b1a0b29c25ea135b7bcc0929d6f65a118f5">I2cMaster::kPullupsOn</a>
 }<tr class="memdesc:a9839cfc29c6fa40e194426db97cab1b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">This enum lists the options for controlling the built-in pullups in the TWI hardware.  <a href="namespaceI2cMaster.html#a9839cfc29c6fa40e194426db97cab1b1">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:a9839cfc29c6fa40e194426db97cab1b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac83dee34e238b9c36fc7357f73d09f9b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceI2cMaster.html#ac83dee34e238b9c36fc7357f73d09f9b">I2cMaster::start</a> (uint8_t speed=kI2cBusFast)</td></tr>
<tr class="memdesc:ac83dee34e238b9c36fc7357f73d09f9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures the TWI hardware for I2C communications in Master mode. You must call this function before conducting any I2C communications using the functions in this module.  <a href="namespaceI2cMaster.html#ac83dee34e238b9c36fc7357f73d09f9b">More...</a><br /></td></tr>
<tr class="separator:ac83dee34e238b9c36fc7357f73d09f9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65f5ad4f6a0e8e29751d6621338b86b5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceI2cMaster.html#a65f5ad4f6a0e8e29751d6621338b86b5">I2cMaster::stop</a> ()</td></tr>
<tr class="memdesc:a65f5ad4f6a0e8e29751d6621338b86b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Terminates the I2C communications using the TWI hardware, and disables the TWI interrupts.  <a href="namespaceI2cMaster.html#a65f5ad4f6a0e8e29751d6621338b86b5">More...</a><br /></td></tr>
<tr class="separator:a65f5ad4f6a0e8e29751d6621338b86b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89b57e3382e8d694179251cb802e9c72"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceI2cMaster.html#a89b57e3382e8d694179251cb802e9c72">I2cMaster::pullups</a> (uint8_t set=kPullupsOn)</td></tr>
<tr class="memdesc:a89b57e3382e8d694179251cb802e9c72"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the state of the internal pullups that are part of the TWI hardware.  <a href="namespaceI2cMaster.html#a89b57e3382e8d694179251cb802e9c72">More...</a><br /></td></tr>
<tr class="separator:a89b57e3382e8d694179251cb802e9c72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa97b1fcfac141edfd191206c84aafe6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceI2cMaster.html#aaa97b1fcfac141edfd191206c84aafe6">I2cMaster::busy</a> ()</td></tr>
<tr class="memdesc:aaa97b1fcfac141edfd191206c84aafe6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reports whether the TWI hardware is busy communicating (either transmitting or receiving).  <a href="namespaceI2cMaster.html#aaa97b1fcfac141edfd191206c84aafe6">More...</a><br /></td></tr>
<tr class="separator:aaa97b1fcfac141edfd191206c84aafe6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a334b8d690dd3ef23b1e0ec48cbcaae00"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceI2cMaster.html#a334b8d690dd3ef23b1e0ec48cbcaae00">I2cMaster::writeAsync</a> (uint8_t address, uint8_t registerAddress, volatile uint8_t *status)</td></tr>
<tr class="memdesc:a334b8d690dd3ef23b1e0ec48cbcaae00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transmit a single register address (a one-byte message) asynchronously. This function queues the message and returns immediately. Eventual status of the transmitted message can be monitored via the designated status variable (passed as a pointer to this function).  <a href="namespaceI2cMaster.html#a334b8d690dd3ef23b1e0ec48cbcaae00">More...</a><br /></td></tr>
<tr class="separator:a334b8d690dd3ef23b1e0ec48cbcaae00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32dbbe57f83912daa13b1ec527b8c8a3"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceI2cMaster.html#a32dbbe57f83912daa13b1ec527b8c8a3">I2cMaster::writeAsync</a> (uint8_t address, uint8_t registerAddress, uint8_t data, volatile uint8_t *status)</td></tr>
<tr class="memdesc:a32dbbe57f83912daa13b1ec527b8c8a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transmit a single register address and corresponding single byte of data asynchronously. This function queues the message and returns immediately. Eventual status of the transmitted message can be monitored via the designated status variable (passed as a pointer to this function).  <a href="namespaceI2cMaster.html#a32dbbe57f83912daa13b1ec527b8c8a3">More...</a><br /></td></tr>
<tr class="separator:a32dbbe57f83912daa13b1ec527b8c8a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d7e0543938e4094eaa801ebfc8cd521"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceI2cMaster.html#a8d7e0543938e4094eaa801ebfc8cd521">I2cMaster::writeAsync</a> (uint8_t address, uint8_t registerAddress, const char *data, volatile uint8_t *status)</td></tr>
<tr class="memdesc:a8d7e0543938e4094eaa801ebfc8cd521"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transmit a single register address and corresponding null-terminated string of data asynchronously. This function queues the message and returns immediately. Eventual status of the transmitted message can be monitored via the designated status variable (passed as a pointer to this function).  <a href="namespaceI2cMaster.html#a8d7e0543938e4094eaa801ebfc8cd521">More...</a><br /></td></tr>
<tr class="separator:a8d7e0543938e4094eaa801ebfc8cd521"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d10ee2e81d48d8c88040cd980897843"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceI2cMaster.html#a5d10ee2e81d48d8c88040cd980897843">I2cMaster::writeAsync</a> (uint8_t address, uint8_t registerAddress, uint8_t *data, uint8_t numberBytes, volatile uint8_t *status)</td></tr>
<tr class="memdesc:a5d10ee2e81d48d8c88040cd980897843"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transmit a single register address and corresponding buffer of data asynchronously. This function queues the message and returns immediately. Eventual status of the transmitted message can be monitored via the designated status variable (passed as a pointer to this function).  <a href="namespaceI2cMaster.html#a5d10ee2e81d48d8c88040cd980897843">More...</a><br /></td></tr>
<tr class="separator:a5d10ee2e81d48d8c88040cd980897843"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a817bd14c8540395eed0ebd4d5149b7b2"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceI2cMaster.html#a817bd14c8540395eed0ebd4d5149b7b2">I2cMaster::readAsync</a> (uint8_t address, uint8_t numberBytes, volatile uint8_t *destination, volatile uint8_t *bytesRead, volatile uint8_t *status)</td></tr>
<tr class="memdesc:a817bd14c8540395eed0ebd4d5149b7b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Request to read data from a device and receive that data asynchronously. This function queues the message and returns immediately. Eventual status of the transmitted message can be monitored via the designated status variable (passed as a pointer to this function). When the status variable reports kI2cCompletedOk, the requested data can be read from the receive buffer.  <a href="namespaceI2cMaster.html#a817bd14c8540395eed0ebd4d5149b7b2">More...</a><br /></td></tr>
<tr class="separator:a817bd14c8540395eed0ebd4d5149b7b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcad5ae556b935b5b38a264af8bb2ac2"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceI2cMaster.html#abcad5ae556b935b5b38a264af8bb2ac2">I2cMaster::readAsync</a> (uint8_t address, uint8_t registerAddress, uint8_t numberBytes, volatile uint8_t *destination, volatile uint8_t *bytesRead, volatile uint8_t *status)</td></tr>
<tr class="memdesc:abcad5ae556b935b5b38a264af8bb2ac2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Request to read data from a specific register on a device and receive that data asynchronously. This function queues the message and returns immediately. Eventual status of the transmitted message can be monitored via the designated status variable (passed as a pointer to this function). When the status variable reports kI2cCompletedOk, the requested data can be read from the receive buffer.  <a href="namespaceI2cMaster.html#abcad5ae556b935b5b38a264af8bb2ac2">More...</a><br /></td></tr>
<tr class="separator:abcad5ae556b935b5b38a264af8bb2ac2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99261b7c8fa73bc46436623038019081"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceI2cMaster.html#a99261b7c8fa73bc46436623038019081">I2cMaster::writeSync</a> (uint8_t address, uint8_t registerAddress)</td></tr>
<tr class="memdesc:a99261b7c8fa73bc46436623038019081"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transmit a single register address (a one-byte message) synchronously. This function blocks until the communications exchange is complete or encounters an error. Error codes are returned (0 means no error).  <a href="namespaceI2cMaster.html#a99261b7c8fa73bc46436623038019081">More...</a><br /></td></tr>
<tr class="separator:a99261b7c8fa73bc46436623038019081"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1fb20a0439b7239e8a51693ae2e2779"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceI2cMaster.html#aa1fb20a0439b7239e8a51693ae2e2779">I2cMaster::writeSync</a> (uint8_t address, uint8_t registerAddress, uint8_t data)</td></tr>
<tr class="memdesc:aa1fb20a0439b7239e8a51693ae2e2779"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transmit a single register address and corresponding single byte of data synchronously. This function blocks until the communications exchange is complete or encounters an error. Error codes are returned (0 means no error).  <a href="namespaceI2cMaster.html#aa1fb20a0439b7239e8a51693ae2e2779">More...</a><br /></td></tr>
<tr class="separator:aa1fb20a0439b7239e8a51693ae2e2779"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2fa629ea18f34803ed017f67ba3b9a2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceI2cMaster.html#aa2fa629ea18f34803ed017f67ba3b9a2">I2cMaster::writeSync</a> (uint8_t address, uint8_t registerAddress, const char *data)</td></tr>
<tr class="memdesc:aa2fa629ea18f34803ed017f67ba3b9a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transmit a single register address and corresponding null-terminated string of data synchronously. This function blocks until the communications exchange is complete or encounters an error. Error codes are returned (0 means no error).  <a href="namespaceI2cMaster.html#aa2fa629ea18f34803ed017f67ba3b9a2">More...</a><br /></td></tr>
<tr class="separator:aa2fa629ea18f34803ed017f67ba3b9a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fc2b7193dcc35fc9eaba3d130af5345"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceI2cMaster.html#a6fc2b7193dcc35fc9eaba3d130af5345">I2cMaster::writeSync</a> (uint8_t address, uint8_t registerAddress, uint8_t *data, uint8_t numberBytes)</td></tr>
<tr class="memdesc:a6fc2b7193dcc35fc9eaba3d130af5345"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transmit a single register address and corresponding buffer of data synchronously. This function blocks until the communications exchange is complete or encounters an error. Error codes are returned (0 means no error).  <a href="namespaceI2cMaster.html#a6fc2b7193dcc35fc9eaba3d130af5345">More...</a><br /></td></tr>
<tr class="separator:a6fc2b7193dcc35fc9eaba3d130af5345"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad50eb37ed46981c09c5e0fb93832b685"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceI2cMaster.html#ad50eb37ed46981c09c5e0fb93832b685">I2cMaster::readSync</a> (uint8_t address, uint8_t numberBytes, uint8_t *destination)</td></tr>
<tr class="memdesc:ad50eb37ed46981c09c5e0fb93832b685"><td class="mdescLeft">&#160;</td><td class="mdescRight">Request to read data from a device and receive that data synchronously. This function blocks until the communications exchange is complete or encounters an error. Error codes are returned (0 means no error).  <a href="namespaceI2cMaster.html#ad50eb37ed46981c09c5e0fb93832b685">More...</a><br /></td></tr>
<tr class="separator:ad50eb37ed46981c09c5e0fb93832b685"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af884da3907c785422f6387c4108652cc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceI2cMaster.html#af884da3907c785422f6387c4108652cc">I2cMaster::readSync</a> (uint8_t address, uint8_t registerAddress, uint8_t numberBytes, uint8_t *destination)</td></tr>
<tr class="memdesc:af884da3907c785422f6387c4108652cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Request to read data from a specific register on a device and receive that data synchronously. This function blocks until the communications exchange is complete or encounters an error. Error codes are returned (0 means no error).  <a href="namespaceI2cMaster.html#af884da3907c785422f6387c4108652cc">More...</a><br /></td></tr>
<tr class="separator:af884da3907c785422f6387c4108652cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file provides functions that interface to the TWI (two-wire serial interface) hardware of the Arduino Uno (ATmega328) and Arduino Mega (ATmega2560), providing a high-level interface to I2C protocol communications. Include this file if you want your application will operate in Master mode as defined in the I2C protocol. </p>
<p>To use these functions, include <a class="el" href="I2cMaster_8h.html" title="This file provides functions that interface to the TWI (two-wire serial interface) hardware of the Ar...">I2cMaster.h</a> and link against I2cMaster.cpp.</p>
<p>These interfaces are buffered for both input and output and operate using interrupts associated with the TWI hardware. This means the asynchronous transmit functions return immediately after queuing data in the output buffer for transmission and the transmission happens asynchronously, using dedicated TWI hardware. Similarly, data is received asynchronously and placed into the input buffer.</p>
<p>The transmit buffer is a ring buffer. If you try to queue more data than the transmit buffer can hold, the write functions will block until there is room in the buffer (as a result of data being transmitted). Receive buffers are provided by the callers of these functions. Note that due to the nature of the I2C protocol, Master I2C "read" operations must still write a command instructing the destination device to send data for the Master to read, and thus "read" operations still utilize the transmit buffer.</p>
<p>The size of the transmit buffer can be set at compile time via macro constants (the receive buffers are provided the corresponding functions are called). The default size of the transmit buffer assumes the maximum transmit message length is 24 bytes and allows 3 out-going messages to be queued. You can change these defaults by defining the macros <code>I2C_MASTER_MAX_TX_MSG_LEN</code> to specify the maximum transmit message length and <code>I2C_MASTER_MAX_TX_MSG_NBR</code> to specify the maximum number of transmit messages to hold in the buffer. You need to make these define these macros prior to including the file <a class="el" href="I2cMaster_8h.html" title="This file provides functions that interface to the TWI (two-wire serial interface) hardware of the Ar...">I2cMaster.h</a>, each time it is included. So you should define these using a compiler option (e.g., <code>-DI2C_MASTER_MAX_TX_MSG_LEN=32</code> <code>-DI2C_MASTER_MAX_TX_MSG_NBR=5</code>) to ensure they are consistently defined throughout your project.</p>
<p>This interface assumes your application will operator in I2C Master mode as defined in the I2C protocol. If you wish your application to operate in I2C Slave mode, then instead include <a class="el" href="I2cSlave_8h.html" title="This file provides functions that interface to the TWI (two-wire serial interface) hardware of the Ar...">I2cSlave.h</a> and link against I2cSlave.cpp.</p>
<dl class="section note"><dt>Note</dt><dd>Only one of I2cMaster.cpp and I2cSlave.cpp can be linking into your application. These two files install different, incompatible versions of the TWI interrupt function. AVRTools does not support building an application that functions both as a Master and as a Slave under the I2C protocol. This limitation allows the corresponding TWI interrupt functions to be significantly leaner and faster. </dd></dl>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Dec 31 2018 23:49:37 for AVRTools by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
