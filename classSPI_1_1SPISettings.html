<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AVRTools: SPI::SPISettings Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AVRTools
   </div>
   <div id="projectbrief">A Library for the AVR ATmega328 and ATmega2560 Microcontrollers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceSPI.html">SPI</a></li><li class="navelem"><a class="el" href="classSPI_1_1SPISettings.html">SPISettings</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classSPI_1_1SPISettings-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">SPI::SPISettings Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A class that binds settings for configuring SPI transmissions.  
 <a href="classSPI_1_1SPISettings.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="SPI_8h_source.html">SPI.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2f3af717a32d991012c6956b45c170f0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSPI_1_1SPISettings.html#a2f3af717a32d991012c6956b45c170f0">SPISettings</a> (uint32_t maxSpeed, uint8_t bitOrder, uint8_t dataMode)</td></tr>
<tr class="memdesc:a2f3af717a32d991012c6956b45c170f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">The constructor builds an <a class="el" href="classSPI_1_1SPISettings.html" title="A class that binds settings for configuring SPI transmissions. ">SPISettings</a> object out of three parameters describing the maximum transmission speed, the data order (most or least significant bit first), and the data mode (phase and polarity). Note that bit order extends to byte order when passing multibyte integers.  <a href="#a2f3af717a32d991012c6956b45c170f0">More...</a><br /></td></tr>
<tr class="separator:a2f3af717a32d991012c6956b45c170f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1247fdb7126a6d79f1b6c5c01d45f605"><td class="memItemLeft" align="right" valign="top"><a id="a1247fdb7126a6d79f1b6c5c01d45f605"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSPI_1_1SPISettings.html#a1247fdb7126a6d79f1b6c5c01d45f605">SPISettings</a> ()</td></tr>
<tr class="memdesc:a1247fdb7126a6d79f1b6c5c01d45f605"><td class="mdescLeft">&#160;</td><td class="mdescRight">The constructor builds an <a class="el" href="classSPI_1_1SPISettings.html" title="A class that binds settings for configuring SPI transmissions. ">SPISettings</a> object with default settings corresponding to a maximum transmission speed of 8 MHz, most significant bit first, and kSpiMode0. <br /></td></tr>
<tr class="separator:a1247fdb7126a6d79f1b6c5c01d45f605"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f42a34c2620d7f1cc30443a973a2aa9"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSPI_1_1SPISettings.html#a3f42a34c2620d7f1cc30443a973a2aa9">getSpcr</a> () const</td></tr>
<tr class="memdesc:a3f42a34c2620d7f1cc30443a973a2aa9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the appropriate configure value for the SPCR register.  <a href="#a3f42a34c2620d7f1cc30443a973a2aa9">More...</a><br /></td></tr>
<tr class="separator:a3f42a34c2620d7f1cc30443a973a2aa9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c56462e3b6d74b5be768120739a5a2a"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSPI_1_1SPISettings.html#a6c56462e3b6d74b5be768120739a5a2a">getSpsr</a> () const</td></tr>
<tr class="memdesc:a6c56462e3b6d74b5be768120739a5a2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the appropriate configure value for the SPSR register.  <a href="#a6c56462e3b6d74b5be768120739a5a2a">More...</a><br /></td></tr>
<tr class="separator:a6c56462e3b6d74b5be768120739a5a2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A class that binds settings for configuring SPI transmissions. </p>
<p>The <a class="el" href="classSPI_1_1SPISettings.html" title="A class that binds settings for configuring SPI transmissions. ">SPISettings</a> object is used to configure the SPI hardware. The three parameters are combined into a single <a class="el" href="classSPI_1_1SPISettings.html" title="A class that binds settings for configuring SPI transmissions. ">SPISettings</a> object, which is passed to <a class="el" href="namespaceSPI.html#aac2f8ee9dc17edbf7d7af7e0b3200a53" title="Set the configuration of SPI subsystem to match the needs of the system you are going to communicate ...">SPI::configure()</a>. You need to configure the SPI subsystem in this way before transmitting any data. The configuration remains in effect until explicitly changed by another call to <a class="el" href="namespaceSPI.html#aac2f8ee9dc17edbf7d7af7e0b3200a53" title="Set the configuration of SPI subsystem to match the needs of the system you are going to communicate ...">SPI::configure()</a> or the SPI subsystem is disabled by a call to <a class="el" href="namespaceSPI.html#aeb912ca88a7391bd1d49a74b4b94cd3f" title="Disable the SPI subsystem, precluding further transmissions. ">SPI::disable()</a>.</p>
<p>This class is taken almost verbatim from the Arduino library <a class="el" href="classSPI_1_1SPISettings.html" title="A class that binds settings for configuring SPI transmissions. ">SPISettings</a> class created by Matthijs Kooijman and licensed under terms of either the GNU General Public License version 2 or the GNU Lesser General Public License version 2.1.</p>
<p>The implementation makes clever use of GCC intrinsic functions to do essentially all the heavy lifting at compile time whenever the SPI parameters are compile-time constants, producing very small and efficient code in this case. My modifications reformat the code to the AVRTools library conventions and adapt the interface to align with the AVRTools SPI implementation. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a2f3af717a32d991012c6956b45c170f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f3af717a32d991012c6956b45c170f0">&sect;&nbsp;</a></span>SPISettings()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">SPI::SPISettings::SPISettings </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>maxSpeed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bitOrder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>dataMode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The constructor builds an <a class="el" href="classSPI_1_1SPISettings.html" title="A class that binds settings for configuring SPI transmissions. ">SPISettings</a> object out of three parameters describing the maximum transmission speed, the data order (most or least significant bit first), and the data mode (phase and polarity). Note that bit order extends to byte order when passing multibyte integers. </p>
<p>The code is designed to be exceptionally efficient and small if all three parameters are compile-time constants.</p>
<ul>
<li><code>maxSpeed</code> the maximum speed of transmission, in herz (Hz). For a SPI chip rated up to 16 MHz, use 16000000. </li>
<li><code>bitOrder</code> whether least significant or most significant bit is first. Pass either kMsbFirst or kLsbFirst. </li>
<li><code>dataMode</code> sets the data mode (phase and polarity) for SPI communications. Pass one of kSpiMode0, kSpiMode1, kSpiMode2, or kSpiMode3. </li>
</ul>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a3f42a34c2620d7f1cc30443a973a2aa9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f42a34c2620d7f1cc30443a973a2aa9">&sect;&nbsp;</a></span>getSpcr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t SPI::SPISettings::getSpcr </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the appropriate configure value for the SPCR register. </p>
<dl class="section return"><dt>Returns</dt><dd>a value to load in the SPCR register to configure the SPI hardware. </dd></dl>

</div>
</div>
<a id="a6c56462e3b6d74b5be768120739a5a2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c56462e3b6d74b5be768120739a5a2a">&sect;&nbsp;</a></span>getSpsr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t SPI::SPISettings::getSpsr </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the appropriate configure value for the SPSR register. </p>
<dl class="section return"><dt>Returns</dt><dd>a value to load in the SPSR register to configure the SPI hardware. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="SPI_8h_source.html">SPI.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Dec 30 2016 12:55:09 for AVRTools by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
