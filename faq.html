<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>AVRTools: FAQ</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">AVRTools
   </div>
   <div id="projectbrief">A Library for the AVR ATmega328 and ATmega2560 Microcontrollers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">FAQ </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="AvrFaq"></a>
Frequently Asked Questions</h1>
<ul>
<li><a class="el" href="faq.html#FaqIdeLib">Can AVRTools be installed as an Arduino IDE Library?</a></li>
<li><a class="el" href="faq.html#FaqPins">Why can't I assign pins like pPin01 to a variable?</a></li>
<li><a class="el" href="faq.html#FaqSpiAsynch">Why isn't the SPI module asynchronous?</a></li>
<li><a class="el" href="faq.html#FaqSpiMaster">Why does the SPI module only implement master mode?</a></li>
<li><a class="el" href="faq.html#FaqWhyUnder">Why is there a setGpioPinHigh() macro and a _setGpioPinHigh() macro?</a></li>
<li><a class="el" href="faq.html#FaqHowWork">_setGpioPinHigh() is defined with 8 arguments, but called with 1: how can that work?</a></li>
<li><a class="el" href="faq.html#FaqWhyV">Why is there a setGpioPinHigh() macro and a setGpioPinHighV() function?</a></li>
</ul>
<h1><a class="anchor" id="FaqIdeLib"></a>
Can AVRTools be installed as an Arduino IDE Library?</h1>
<p>No, AVRTools is designed to replace the Arduino Library. It is designed for use directly with the <code>avr-gcc</code> compiler (the same compiler used by the Arduino IDE).</p>
<h1><a class="anchor" id="FaqPins"></a>
Why can't I assign pins like pPin01 to a variable?</h1>
<p>Because pin names like <code>pPin01</code> are actually complex macros that expand to a comma separated list of other macros. The macro pin names can only be understood and used by the function macros specifically designed to use them. This is explained in greater detail in <a class="el" href="index.html#WhatNeedKnow">What you need to know about pin name macros</a>.</p>
<p>If you really need GPIO pin variables, there is a way to do it. See the section on <a class="el" href="AdvancedFeatures.html#AdvancedGpioVars">GPIO pin variables</a>. Note in particular that GPIO pin variables come with high costs, both in speed and memory requirements.</p>
<h1><a class="anchor" id="FaqSpiAsynch"></a>
Why isn't the SPI module asynchronous?</h1>
<p>The <a class="el" href="namespaceSPI.html" title="This namespace bundles an interface to the SPI hardware subsystem on the AVR ATMega328p (Arduino Uno)...">SPI</a> module is implemented synchronously using polling loops because actual testing has shown this to be nearly twice as fast as implementing the functionality asynchronously using interrupts. Tomaž Šolc has done the research and posted the results on his <a href="https://www.tablix.org/~avian/blog/archives/2012/06/spi_interrupts_versus_polling/">blog</a>. Check it out (and check out the other articles, his blog is pretty interesting).</p>
<h1><a class="anchor" id="FaqSpiMaster"></a>
Why does the SPI module only implement master mode?</h1>
<p>Easy answer: I have never needed anything other than SPI master mode. In every case I use SPI, the AVR microcontroller is the master talking to some external sensor or device that is the slave. While AVR's SPI hardware supports slave mode, I don't think it is common. If you want to use SPI to communicate across two AVR microcontrollers, obviously one of them would have to be in slave mode. But in that situation, I'd probably have them communicate via a serial connection.</p>
<p>If you need a slave mode SPI interface, let me know. It's pretty straightforward to code. I may well get around to doing it one day in any case, just for completeness.</p>
<h1><a class="anchor" id="FaqWhyUnder"></a>
Why is there a setGpioPinHigh() macro and a _setGpioPinHigh() macro?</h1>
<p>Getting maximum efficiency from the GPIO pin name macros while making them easy to use requires a series of recursive macro expansions. To make this work, it is essential to force rescanning of macro expansions, and nested macro function calls is a practical way to force macro rescanning. So all of the GPIO pin related macro functions call a helper macro function that has the same name except for a prepended underscore.</p>
<p>The helper macro functions are an internal implementation detail, and that is why they are not formally documented.</p>
<h1><a class="anchor" id="FaqHowWork"></a>
_setGpioPinHigh() is defined with 8 arguments, but called with 1: how can that work?</h1>
<p>Someone has been reading header files. It works because of the magic of the C/C++ preprocessor rescanning rules. The rescanning rules are described in 6.10.3.4 of the <a href="http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1124.pdf">ISO Standard for C</a> (the same rules apply to C++). It requires lawyer-like abilities to completely comprehend the full implications of this short paragraph. However, the gist of it is that if you have the following three macros:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define BAR(X,Y) (X+Y)</span></div>
<div class="line"><span class="preprocessor">#define FOO(X) BAR(X)</span></div>
<div class="line"><span class="preprocessor">#define A B,C</span></div>
</div><!-- fragment --><p>And if you then call <code>FOO(A)</code> in your code, the preprocessor executes the following steps:</p><ul>
<li>first <code>FOO(A)</code> is expanded to <code>BAR(A)</code></li>
<li>next <code>BAR(A)</code> is expanded to <code>BAR(B,C)</code></li>
<li>then finally <code>BAR(B,C)</code> is expanded to <code>(B+C)</code>.</li>
</ul>
<p>This preprocessor rescanning logic is what powers all of the pin macro magic, not just _setGpioPinHigh().</p>
<h1><a class="anchor" id="FaqWhyV"></a>
Why is there a setGpioPinHigh() macro and a setGpioPinHighV() function?</h1>
<p>All of the GPIO pin related "functions" come in two versions. The versions that do not end in a "V" are actually macros and work with the GPIO pin name macros (e.g, <code>pPin01</code>). The versions that end with a "V" are true functions and work with GPIO variables. See <a class="el" href="AdvancedFeatures.html#AdvancedGpioVars">GPIO pin variables</a>. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Nov 14 2015 14:49:32 for AVRTools by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
