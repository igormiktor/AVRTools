<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AVRTools: I2cSlave.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AVRTools
   </div>
   <div id="projectbrief">A Library for the AVR ATmega328 and ATmega2560 Microcontrollers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_c9687f172f2182476bc6c15b0976464d.html">AVRTools</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">I2cSlave.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This file provides functions that interface to the TWI (two-wire serial interface) hardware of the Arduino Uno (ATmega328) and Arduino Mega (ATmega2560), providing a high-level interface to I2C protocol communications. Include this file if you want your application will operate in Slave mode as defined in the I2C protocol.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for I2cSlave.h:</div>
<div class="dyncontent">
<div class="center"><img src="I2cSlave_8h__incl.png" border="0" usemap="#I2cSlave_8h" alt=""/></div>
</div>
</div>
<p><a href="I2cSlave_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespaceI2cSlave"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceI2cSlave.html">I2cSlave</a></td></tr>
<tr class="memdesc:namespaceI2cSlave"><td class="mdescLeft">&#160;</td><td class="mdescRight">This namespace bundles the I2C-protocol-based interface to the TWI hardware. It provides logical cohesion for functions implement the Slave portions of the I2C protocol and prevents namespace collisions. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:adbbafca5760d2ba052bb8559ddd98c4b"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceI2cSlave.html#adbbafca5760d2ba052bb8559ddd98c4b">I2cSlave::I2cBusSpeed</a> { <a class="el" href="namespaceI2cSlave.html#adbbafca5760d2ba052bb8559ddd98c4ba86443517afc84f8300a0772ff23fd57e">I2cSlave::kI2cBusSlow</a>, 
<a class="el" href="namespaceI2cSlave.html#adbbafca5760d2ba052bb8559ddd98c4bad9865cf6f10668579f8ca38c6d04ba8d">I2cSlave::kI2cBusFast</a>
 }<tr class="memdesc:adbbafca5760d2ba052bb8559ddd98c4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">This enum lists I2C bus speed configurations.  <a href="namespaceI2cSlave.html#adbbafca5760d2ba052bb8559ddd98c4b">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:adbbafca5760d2ba052bb8559ddd98c4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3d6ba56b131fa33743a6e0c9ebe31df"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceI2cSlave.html#af3d6ba56b131fa33743a6e0c9ebe31df">I2cSlave::I2cStatusCodes</a> { <br />
&#160;&#160;<a class="el" href="namespaceI2cSlave.html#af3d6ba56b131fa33743a6e0c9ebe31dfa19e2dafb16d612f1300d218b5227ffda">I2cSlave::kI2cCompletedOk</a> = 0x00, 
<a class="el" href="namespaceI2cSlave.html#af3d6ba56b131fa33743a6e0c9ebe31dfa18126f5403e18304d90dff638bf6671e">I2cSlave::kI2cError</a> = 0x01, 
<a class="el" href="namespaceI2cSlave.html#af3d6ba56b131fa33743a6e0c9ebe31dfae7863a5b9e0f970968d5e48a0ec19990">I2cSlave::kI2cTxPartial</a> = 0x02, 
<a class="el" href="namespaceI2cSlave.html#af3d6ba56b131fa33743a6e0c9ebe31dfac9160034ced0eb15f90c7380f765c9d4">I2cSlave::kI2cRxOverflow</a> = 0x04, 
<br />
&#160;&#160;<a class="el" href="namespaceI2cSlave.html#af3d6ba56b131fa33743a6e0c9ebe31dfa1e5e5117195e423b452ff6e40e80eb3b">I2cSlave::kI2cInProgress</a> = 0x06
<br />
 }<tr class="memdesc:af3d6ba56b131fa33743a6e0c9ebe31df"><td class="mdescLeft">&#160;</td><td class="mdescRight">This enum lists I2C status codes reported by the various transmit functions.  <a href="namespaceI2cSlave.html#af3d6ba56b131fa33743a6e0c9ebe31df">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:af3d6ba56b131fa33743a6e0c9ebe31df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3daa079057310ce8c3f72ac53aab0df0"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceI2cSlave.html#a3daa079057310ce8c3f72ac53aab0df0">I2cSlave::I2cPullups</a> { <a class="el" href="namespaceI2cSlave.html#a3daa079057310ce8c3f72ac53aab0df0a9093d7a45ada87eced17faba411cec2b">I2cSlave::kPullupsOff</a>, 
<a class="el" href="namespaceI2cSlave.html#a3daa079057310ce8c3f72ac53aab0df0a93c5d635ac24871115a21d6a2abc27d6">I2cSlave::kPullupsOn</a>
 }<tr class="memdesc:a3daa079057310ce8c3f72ac53aab0df0"><td class="mdescLeft">&#160;</td><td class="mdescRight">This enum lists the options for controlling the built-in pullups in the TWI hardware.  <a href="namespaceI2cSlave.html#a3daa079057310ce8c3f72ac53aab0df0">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:a3daa079057310ce8c3f72ac53aab0df0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a97258ee91200b3aed311cff2d91ad651"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceI2cSlave.html#a97258ee91200b3aed311cff2d91ad651">I2cSlave::processI2cMessage</a> (uint8_t *buffer, uint8_t len)</td></tr>
<tr class="memdesc:a97258ee91200b3aed311cff2d91ad651"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function must be defined by the user. It is called by the TWI interrupt function installed as part of I2cSlave.cpp whenever it receives a message from the Master. The user should implement this function to respond to the data in the buffer, taking actions and as appropriate returning data to the buffer (for asynchronous transmission to the Master).  <a href="namespaceI2cSlave.html#a97258ee91200b3aed311cff2d91ad651">More...</a><br /></td></tr>
<tr class="separator:a97258ee91200b3aed311cff2d91ad651"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7db915424e70a318cd19bca551c5bbd5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceI2cSlave.html#a7db915424e70a318cd19bca551c5bbd5">I2cSlave::start</a> (uint8_t ownAddress, uint8_t speed=kI2cBusFast, bool answerGeneralCall=false)</td></tr>
<tr class="memdesc:a7db915424e70a318cd19bca551c5bbd5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures the TWI hardware for I2C communications in Slave mode. You must call this function before conducting any I2C communications using the functions in this module.  <a href="namespaceI2cSlave.html#a7db915424e70a318cd19bca551c5bbd5">More...</a><br /></td></tr>
<tr class="separator:a7db915424e70a318cd19bca551c5bbd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85cd58090278e43f652f687a6879e804"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceI2cSlave.html#a85cd58090278e43f652f687a6879e804">I2cSlave::stop</a> ()</td></tr>
<tr class="memdesc:a85cd58090278e43f652f687a6879e804"><td class="mdescLeft">&#160;</td><td class="mdescRight">Terminates the I2C communications using the TWI hardware, and disables the TWI interrupts.  <a href="namespaceI2cSlave.html#a85cd58090278e43f652f687a6879e804">More...</a><br /></td></tr>
<tr class="separator:a85cd58090278e43f652f687a6879e804"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f8baf11d4d07e7a832c851b0b293889"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceI2cSlave.html#a8f8baf11d4d07e7a832c851b0b293889">I2cSlave::pullups</a> (uint8_t set=kPullupsOn)</td></tr>
<tr class="memdesc:a8f8baf11d4d07e7a832c851b0b293889"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the state of the internal pullups that are part of the TWI hardware.  <a href="namespaceI2cSlave.html#a8f8baf11d4d07e7a832c851b0b293889">More...</a><br /></td></tr>
<tr class="separator:a8f8baf11d4d07e7a832c851b0b293889"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15c2328be0f025f893088a014e8b99e3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceI2cSlave.html#a15c2328be0f025f893088a014e8b99e3">I2cSlave::busy</a> ()</td></tr>
<tr class="memdesc:a15c2328be0f025f893088a014e8b99e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reports whether the TWI hardware is busy communicating (either transmitting or receiving).  <a href="namespaceI2cSlave.html#a15c2328be0f025f893088a014e8b99e3">More...</a><br /></td></tr>
<tr class="separator:a15c2328be0f025f893088a014e8b99e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file provides functions that interface to the TWI (two-wire serial interface) hardware of the Arduino Uno (ATmega328) and Arduino Mega (ATmega2560), providing a high-level interface to I2C protocol communications. Include this file if you want your application will operate in Slave mode as defined in the I2C protocol. </p>
<p>To use these functions, include <a class="el" href="I2cSlave_8h.html" title="This file provides functions that interface to the TWI (two-wire serial interface) hardware of the Ar...">I2cSlave.h</a> and link against I2cSlave.cpp.</p>
<p>These interfaces are buffered for recieving and sending data and operate using interrupts associated with the TWI hardware. This means data from the Master is received asynchronously and when reception is complete, a user-supplied function is called. That function has the option of placing data in a buffer to be transmitted asynchronously back to the Master.</p>
<p>The Slave buffer is a simple array. The size of the Slave buffer can be set at compile time via the macro constant <code>I2C_SLAVE_BUFFER_SIZE</code>. The default size of the Slave buffer is 32 bytes. You can change the default by defining the macro <code>I2C_SLAVE_BUFFER_SIZE</code> prior to including the file <a class="el" href="I2cSlave_8h.html" title="This file provides functions that interface to the TWI (two-wire serial interface) hardware of the Ar...">I2cSlave.h</a>, each time it is included. So you should define it using a compiler option (e.g., <code>-DI2C_SLAVE_BUFFER_SIZE=64</code>) to ensure it is consistently defined throughout your project.</p>
<p>This interface assumes your application will operator in I2C Slave mode as defined in the I2C protocol. If you wish your application to operate in I2C Master mode, then instead include <a class="el" href="I2cMaster_8h.html" title="This file provides functions that interface to the TWI (two-wire serial interface) hardware of the Ar...">I2cMaster.h</a> and link against I2cMaster.cpp.</p>
<dl class="section note"><dt>Note</dt><dd>Only one of I2cMaster.cpp and I2cSlave.cpp can be linking into your application. These two files install different, incompatible versions of the TWI interrupt function. AVRTools does not support building an application that functions both as a Master and as a Slave under the I2C protocol. This limitation allows the corresponding TWI interrupt functions to be significantly leaner and faster. </dd></dl>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jan 31 2017 21:24:08 for AVRTools by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
